gem5-gpu is supported starting from gem5 version 9771. This refers to the
version of gem5 which the gem5-gpu wiki lists under versions of software
on the getting started page. 

To use nvmain with gem5, simply use the nvmain-ruby-XXXX patch, where XXXX
is less than or equal to the version of gem5 used by gem5-gpu. 

You can build gem5-gpu with NVMain support as follows:

scons -j 4 build/VI_hammer/gem5.opt --default=X86         \
    EXTRAS=../gem5-gpu/src:../gpgpu-sim/:/path/to/nvmain  \
    PROTOCOL=VI_hammer GPGPU_SIM=True

By default, NVMain will be used over the standard RubyMemoryControl class.
To manually select the type of memory system, you may use the --ruby-mem-type
option, for example:

build/VI_hammer/gem5.opt ../gem5-gpu/configs/se_fusion.py -c \
    /path/to/rodinia/backprop/gem5_fusion_backprop -o 16     \
    --ruby-mem-type=ruby

To explicitly specify nvmain:

build/VI_hammer/gem5.opt ../gem5-gpu/configs/se_fusion.py -c \
    /path/to/rodinia/backprop/gem5_fusion_backprop -o 16     \
    --ruby-mem-type=nvmain --nvmain-config=/path/to/config   \
    --nvmain-PARAM=VALUE

You may override options in the NVMain configuration file using the 
--nvmain-PARAM=VALUE, where PARAM is the name of the parameter
and VALUE is the value, e.g., '--nvmain-MEM_CTL=FRFCFS_WQF'. You
may specify any number of parameters to override.

